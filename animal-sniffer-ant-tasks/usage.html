<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/usage.apt.vm at 2022-08-16
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Stephen Connolly" />
    <meta name="date" content="2009-11-05" />
    <title>Animal Sniffer Ant Tasks &#x2013; Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/mojohaus/animal-sniffer-ant-tasks">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft"><img src="../../images/mojo_logo.png"  alt="MojoHaus"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../" title="MojoHaus">MojoHaus</a><span class="divider">/</span></li>
      <li class=""><a href=".." title="Animal Sniffer">Animal Sniffer</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="Animal Sniffer Ant Tasks">Animal Sniffer Ant Tasks</a><span class="divider">/</span></li>
    <li class="active ">Usage <a href="https://github.com/mojohaus/animal-sniffer/animal-sniffer-ant-tasks/src/site/apt/usage.apt.vm"><img src="./images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2022-08-16</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.22</li>
      <li class="pull-right"><a href="https://maven.apache.org/" class="externalLink" title="Maven">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../index.html" title="Animal Sniffer"><span class="none"></span>Animal Sniffer</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li class="active"><a href="#"><span class="none"></span>Usage</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="examples/checking-signatures.html" title="Checking signatures"><span class="none"></span>Checking signatures</a></li>
    <li><a href="examples/generating-signatures.html" title="Generating signatures"><span class="none"></span>Generating signatures</a></li>
    <li><a href="examples/sample-project.html" title="Sample project"><span class="none"></span>Sample project</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Usage"></a>Usage</h2>
<p>The ANT Tasks include tasks for checking classes against the signatures of an API as well as goals for generating signatures of APIs.</p><section>
<h3><a name="Basic_Usage"></a>Basic Usage</h3><section>
<h4><a name="Defining_the_ANT_Tasks"></a>Defining the ANT Tasks</h4>
<p>Before you can use the Animal Sniffer ANT Tasks you need to inform ANT about these tasks. There are several techniques for defining custom tasks in ANT. Our preferred technique (and the technique that we will assume you use) is to use a namespace and the <code>antlib.xml</code> from within the Animal Sniffer ANT Tasks jar file, for example:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...  
  &lt;typedef uri=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
    &lt;classpath path=&quot;lib/${pom.xml.project.artifactId}-${pom.xml.project.parent.version}.jar&quot;/&gt;
  &lt;/typedef&gt;
  ...
&lt;/project&gt;</pre></div>
<p>Note: if you want to use any of the other techniques for importing ANT tasks, we (Maven developers) assume that you (ANT developer) know how to convert our examples into the technique you are using. This namespace based techique is the way the authors of this document know.</p></section><section>
<h4><a name="Checking_a_classes_against_an_API_signature"></a>Checking a classes against an API signature</h4>
<p>In order to check your classes against an API signature, you use the <code>check-signature</code> task:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:check-signature signature=&quot;.../my-signature.sig&quot;&gt;
      &lt;path path=&quot;classes&quot;/&gt;
    &lt;/as:check-signature&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div>
<p>The path provided will be recursively searched for jar files and class files, all of which will be checked against the supplied signature.</p>
<p>When you run the <code>check-signature</code> task as in the above example, the task will fail if your classes reference any class, method or field that is not either:</p>
<ul>
<li>in the signatures; or</li>
<li>on the path you provided</li></ul>
<p>If you have compiled your classes against a classpath that you have already verified against the signature of your target platform, you can speed up the checking process by giving the <code>check-signature</code> task the classpathRef of your compile classpath. For example, if you are checking a web application against signatures for the Java EE Servlet specification, you might reference the classpath of the WEB-INF/lib folder when checking your WEB-INF/classes path. The following example illustrates how to achieve this:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:check-signature signature=&quot;.../javaee-servlet.sig&quot; classpathRef=&quot;webLibs&quot;&gt;
      &lt;path path=&quot;build/web/WEB-INF/classes&quot;/&gt;
    &lt;/as:check-signature&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div>
<p>For more detailed examples of how to configure this task see:</p>
<ul>
<li><a href="./examples/checking-signatures.html"> Checking signatures</a>.</li></ul></section><section>
<h4><a name="Generating_API_signatures"></a>Generating API signatures</h4>
<p>To generate the signatures of an API, simply invoke the <code>build-signatures</code> tasks providing the path of the API you want to generate the signatures for, e.g.</p>
<div>
<pre>&lt;project ... xmlns:animal-sniffer=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:build-signatures destfile=&quot;dist/api.sig&quot;&gt;
      &lt;path&gt;
        &lt;fileset dir=&quot;classes&quot;/&gt;
        &lt;fileset dir=&quot;lib&quot; includes=&quot;log4j.jar&quot;/&gt;
      &lt;/path&gt;
    &lt;/as:build-signatures&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div>
<p>For more detailed examples of how to configure this goal see:</p>
<ul>
<li><a href="./examples/generating-signatures.html">Generating signatures</a></li></ul></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2008&#x2013;2022
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>