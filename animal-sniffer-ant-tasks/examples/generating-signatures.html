<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/examples/generating-signatures.apt.vm at 2022-08-16
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Stephen Connolly" />
    <meta name="date" content="2009-11-05" />
    <title>Animal Sniffer Ant Tasks &#x2013; Generating signatures</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/mojohaus/animal-sniffer-ant-tasks">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../../" id="bannerLeft"><img src="../../../images/mojo_logo.png"  alt="MojoHaus"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../../" title="MojoHaus">MojoHaus</a><span class="divider">/</span></li>
      <li class=""><a href="../.." title="Animal Sniffer">Animal Sniffer</a><span class="divider">/</span></li>
      <li class=""><a href="../index.html" title="Animal Sniffer Ant Tasks">Animal Sniffer Ant Tasks</a><span class="divider">/</span></li>
    <li class="active ">Generating signatures <a href="https://github.com/mojohaus/animal-sniffer/animal-sniffer-ant-tasks/src/site/apt/examples/generating-signatures.apt.vm"><img src="../images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2022-08-16</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.22</li>
      <li class="pull-right"><a href="https://maven.apache.org/" class="externalLink" title="Maven">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html" title="Animal Sniffer"><span class="none"></span>Animal Sniffer</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../usage.html" title="Usage"><span class="none"></span>Usage</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="../examples/checking-signatures.html" title="Checking signatures"><span class="none"></span>Checking signatures</a></li>
    <li class="active"><a href="#"><span class="none"></span>Generating signatures</a></li>
    <li><a href="../examples/sample-project.html" title="Sample project"><span class="none"></span>Sample project</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Generating_signatures"></a>Generating signatures</h2><section>
<h3><a name="Basic"></a>Basic</h3>
<p>To generate signatures of any API, you simple construct a invoke the <code>build-signatures</code> task and provide the path(s) of all the classes / jar files which form the API. For example:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:build-signatures destfile=&quot;dist/api.sig&quot;&gt;
      &lt;path&gt;
        &lt;fileset dir=&quot;classes&quot;/&gt;
        &lt;fileset dir=&quot;lib&quot; includes=&quot;log4j.jar&quot;/&gt;
      &lt;/path&gt;
    &lt;/as:build-signatures&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div></section><section>
<h3><a name="Generating_.22pure.22_signatures"></a>Generating &quot;pure&quot; signatures</h3>
<p>The above examples generate signatures of the every class in the provided path. There are some situations where you may not want to include all the classes on the provided path, for example when generating the signature of the JRE, as that includes all the implementation classes which are not part of the public contract of the JRE. For example sun.misc.BASE64Encoder is part of Sun's JRE runtime libraries, but is not part of the JRE specification and if you run on a JRE produced by a different vendor, it is highly likely that that class will not be available to your program.</p>
<p>In order to ensure that the Java signatures you generate only include those classes which you want, you may need to tune your signatures.</p><section>
<h4><a name="Inclusion_based_tuning"></a>Inclusion based tuning</h4>
<p>One technique is to only include those classes which you know are part of the JRE public specification. For example:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:build-signatures ...&gt;
      ...
      &lt;includeClasses className=&quot;java.*&quot;/&gt;
      &lt;includeClasses className=&quot;javax.*&quot;/&gt;
      &lt;includeClasses className=&quot;org.omg.*&quot;/&gt;
      &lt;includeClasses className=&quot;org.w3c.dom.*&quot;/&gt;
      &lt;!-- etc --&gt;
      ...
    &lt;/as:build-signatures&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div>
<p>This requires that you known exactly what classes to include.</p></section><section>
<h4><a name="Exclusion_based_tuning"></a>Exclusion based tuning</h4>
<p>The other technique is to specify which classes are not to be included (Note that a combination of the two can also be used.) For example:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:build-signatures ...&gt;
      ...
      &lt;excludeClasses className=&quot;com.sun.*&quot;/&gt;
      &lt;excludeClasses className=&quot;sun.*&quot;/&gt;
      &lt;!-- etc --&gt;
      ...
    &lt;/as:build-signatures&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div></section></section><section>
<h3><a name="Extending_signatures"></a>Extending signatures</h3>
<p>In some cases you may want to generate a signature which extends another signature, this is achieved by adding the required signatures to the <code>build-signature</code> task. For example:</p>
<div>
<pre>&lt;project ... xmlns:as=&quot;antlib:org.codehaus.mojo.animal_sniffer&quot;&gt;
  ...
  &lt;target ...&gt;
    ...
    &lt;as:build-signatures ...&gt;
      ...
      &lt;signature src=&quot;javase-1.5.sig&quot;/&gt;
      &lt;signature src=&quot;servlet-2.4.sig&quot;/&gt;
      &lt;!-- etc --&gt;
      ...
    &lt;/as:build-signatures&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre></div>
<p>Note: The resulting signature will be the union of:</p>
<ul>
<li>any the provided signatures </li>
<li>any classes or jar files you provide via <code>path</code> elements</li></ul>
<p>In addition, prior to writing the final signatures out:</p>
<ul>
<li>(if any <code>includeClasses</code> are specified) only classes which match at least one <code>includeClasses</code> rule will be written to the signature.</li>
<li>(if any <code>excludeClasses</code> are specified) any classes which match at least one <code>exlcudeClasses</code> rule will be excluded from the signature. </li>
<li>if both <code>includeClasses</code> and <code>excludeClasses</code> rules are specified, the <code>excludeClasses</code> rules over-rule the <code>includeClasses</code> rules.</li></ul></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2008&#x2013;2022
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>